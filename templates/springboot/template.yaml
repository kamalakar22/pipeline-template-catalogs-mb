type: pipeline-template
version: 1

name: Spring Boot Multibranch Pipeline (Maven Only)
displayName: Spring Boot Multibranch Pipeline (Maven Only)
description: Multibranch pipeline with feature, PR, and main builds
templateType: MULTIBRANCH

parameters:
  - name: gitCredentials
    type: credentials
    displayName: GitHub Credentials

multibranch:
  branchSource:
    github:
      id: board-game-mb
      repoOwner: kamalakar22
      repository: board_game
      credentialsId: ${gitCredentials}

      traits:
        # Discover all branches
        - $class: org.jenkinsci.plugins.github_branch_source.BranchDiscoveryTrait
          strategyId: 1

        # Discover PRs from same repo
        - $class: org.jenkinsci.plugins.github_branch_source.PullRequestDiscoveryTrait
          strategyId: 1

        # Filter branches by name
        - $class: jenkins.scm.impl.trait.WildcardSCMHeadFilterTrait
          includes: |
            main
            feature-.*
            fix-.*

  orphanedItemStrategy:
    numToKeep: 10
