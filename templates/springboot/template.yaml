type: pipeline-template
version: 1

name: Spring Boot Multibranch Pipeline (Maven Only)
displayName: Spring Boot Multibranch Pipeline (Maven Only)
description: Multibranch pipeline with feature, PR, and main builds
templateType: MULTIBRANCH

parameters:
  - name: gitCredentials
    type: credentials
    displayName: GitHub Credentials

########################################
# âœ… VALID MULTIBRANCH CONFIG
########################################
multibranch:
  branchSource:
    github:
      id: board-game-mb
      repoOwner: kamalakar22
      repository: board_game
      credentialsId: ${gitCredentials}

      traits:
        # Discover branches
        - $class: org.jenkinsci.plugins.github_branch_source.BranchDiscoveryTrait
          strategyId: 1   # all branches

        # Discover PRs
        - $class: org.jenkinsci.plugins.github_branch_source.PullRequestDiscoveryTrait
          strategyId: 1   # PR from origin

        # Filter branch names
        - $class: jenkins.scm.impl.trait.WildcardSCMHeadFilterTrait
          includes: |
            main
            feature-.*
            fix-.*

  orphanedItemStrategy:
    numToKeep: 10
